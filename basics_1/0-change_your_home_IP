#!/bin/bash
# Bash script that configures an Ubuntu server

# Vérifie que le script est exécuté en root
if [ "$EUID" -ne 0 ]; then
  echo "Veuillez exécuter ce script avec sudo."
  exit 1
fi

HOSTS_FILE="/etc/hosts"

# Sauvegarde du fichier hosts
cp "$HOSTS_FILE" "${HOSTS_FILE}.bak"

# Fonction pour ajouter ou remplacer une entrée
add_or_replace() {
    local ip="$1"
    local host="$2"

    # Supprime toute ligne existante contenant le hostname
    sed -i "/[[:space:]]$host$/d" "$HOSTS_FILE"

    # Ajoute la nouvelle ligne
    echo "$ip    $host" >> "$HOSTS_FILE"
}

add_or_replace "127.0.0.2" "localhost"
add_or_replace "8.8.8.8" "facebook.com"

echo "Configuration terminée. Sauvegarde disponible dans /etc/hosts.bak"
